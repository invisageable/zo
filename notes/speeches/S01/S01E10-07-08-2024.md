# S01E10 â€” 07-08-2024.

> *La tuyauterie d'un compilateur.*

[prev](S01E09-06-08-2024.md) â€” [next](S01E11-08-08-2024.md)

## jour 10.

AppelÃ© la carte ou le tuyau, ce concept dÃ©finit l'ensemble des phases qu'un compilateur va exÃ©cuter. Et cela va dÃ©pendre de votre objectif, mais aussi de vos connaissances techniques pour Ãªtre capable de rÃ©aliser chacune d'entre elles.   

GÃ©nÃ©ralement, il y a un dÃ©coupage qui est fait en trois parties distinctes :    

- `front-end` â€” *Ã§a englobe `tokenizer`, `parser` et `analyzer`.* 
- `middle-end` â€” *Ã§a concerne l'optimisation du code.*
- `back-end` â€” *Ã§a gÃ¨re la gÃ©nÃ©ration du code.*

Maintenant, on comprend qu'un compilateur n'est qu'un traducteur qui va effectuer une sÃ©rie de transformation pour viser un langage cible. Je prends le langage `A` et le transforme en langage `B`. Pour y parvenir, il faut s'imaginer le compilateur comme une route de voyage. Si je veux faire un Paris-Vienne, cela va se faire en plusieurs Ã©tapes. Je vais conduire un certain nombre d'heure, me reposer, vÃ©rifier que tout est okay avant de repartir puis je rÃ©pÃ¨te cela, jusqu'Ã  arriver Ã  Vienne.    

Dans l'Ã©criture d'un compilateur c'est la mÃªme chose. Il y a des airs de repos qu'on peut utiliser, je m'explique â€” je souhaite Ã©crire un compilateur qui compile mon langage vers le code machine en me gÃ©nÃ©rant un executable spÃ©cifique Ã  chaque plateformes (Linux, MacOs, Windows). C'est un chemin trÃ¨s long, si je veux y aller d'une traite, je peux me dÃ©courager face aux innombrables difficultÃ©s que je vais rencontrer. D'oÃ¹, l'idÃ©e d'y aller Ã©tape par Ã©tape. D'abord, je vais jusqu'Ã  l'interprÃ©teur â€” Ã  cette Ã©tape, je peux vÃ©rifier que mon langage a bien le bon comportement. De plus, je vais avoir plusieurs possibilitÃ©s â€” transpiler mon ast vers un langage de mon choix, rajouter un systÃ¨me de type, effectuer des optimisations, crÃ©er une machine virtuelle ou encore compiler vers le code machine.    

De un, j'ai dÃ©jÃ  un prototype valide et de deux, je reste motivÃ©. C'est trÃ¨s important la motivation, avancer mÃªme si c'est peu, c'est dÃ©jÃ  mieux que de ne rien faire.

Ma tuyauterie ressemble Ã  Ã§a :

```                 
                    ```zo
                    fun main() {
                      println("ğŸ‘‹ ğŸŒ ğŸ‘½");
                    }
                    ```

                    pathname/dirname
                            |
                            â†“
                      â•­-----------â•®
     â•­---------------â†’| reader    |â†---------------â•®
     |                â•°-----------â•¯                |
     |                      |                      |
     |                    bytes                    |
     |                      â†“                      |
     |                â•­-----------â•®                |
     |---------------â†’| tokenizer |â†---------------|
     |                â•°-----------â•¯                |
     |                      |                      |
     |                    tokens                   |
     |                      â†“                      |
     |                â•­-----------â•®                |
     |---------------â†’| parser    |â†---------------|
     |                â•°-----------â•¯                |
â•­----------â•®                |                â•­----------â•®
| interner |               ast               | reporter |------------------â•®
â•°----------â•¯                â†“                â•°----------â•¯                  â†“
     |                â•­-----------â•®                |                â•­-------------â•®
     |---------------â†’| analyzer  |â†---------------|---------------â†’| interpreter |
     |                â•°-----------â•¯                |                â•°-------------â•¯
     |                      |                      |                       |
     |                  ast typed                  |                     value
     |                      â†“                      |                       â†“
     |                â•­-----------â•®                | 
     |---------------â†’| codegen   |â†---------------|                  `ğŸ‘‹ ğŸŒ ğŸ‘½`
     |                â•°-----------â•¯                |
     |                      |                      |
     |                   bytecode                  |
     |                      â†“                      |
     |                â•­-----------â•®                |
     â•°---------------â†’| builder   |â†---------------â•¯
                      â•°-----------â•¯                       
                            |
                            |
                            |
                            |
                            |
                     .exe --|-- py -------------â†’  ```py
                            |                       # -*- coding: utf-8 -*-
                         wat/wasm
                            |                       def main():
                            â†“                         print("ğŸ‘‹ ğŸŒ ğŸ‘½")
                    
                                                    if __name__ == "__main__":
                                                      main()                                    
                                                    ```
```

Grosso modo hein ! Et tout n'est pas encore cÃ¢blÃ©. Je n'ai pas fait la liaison entre `interner` et `interpreter`. Ce qu'il faut comprendre c'est que `interner` et `reporter` sont en gÃ©nÃ©ral toujours transmis Ã  chaque phase du compilateur. C'est modulable, c'est-Ã -dire que je pourrai rajouter `optimizer` plus tard lorsque j'aurai plus de billes, Ã  part la simplification de sous-expressions constantes. Je n'ai pas la connaissance pour faire quelque chose de pertinent. Tain, je me rends compte qu'il y a tellement de boulot Ã  faire. Ã‡a me rend dÃ©jÃ  fou rien que d'y penser.

*Presque une semaine que je n'ai pas discutÃ© avec un humain ou vu la lumiÃ¨re du jour. Bah oui, il faut savoir ce qu'on veut dans la vie. SociabilisÃ© ou coder son propre turfu ? Faites vos jeux.*

[@invisageable](https://twitter.com/invisageable)   

---

[prev](S01E09-06-08-2024.md) â€” [next](S01E11-08-08-2024.md)
